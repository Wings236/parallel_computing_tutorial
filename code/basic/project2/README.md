Please implement a program to multiply two matrices in two files. There are 6 files in the attachment. `mat-A-32.txt` is for matrix A, the matrix size is 32x32. Other files are similar. 

## Requirements

1. When you run the program as follows, it will output the result into an output file such as `out32.txt`.

```bash
$./matmul mat-A-32.txt mat-B-32.txt out32.txt
```
```bash
$./matmul mat-A-256.txt mat-B-256.txt out256.txt
```
```bash
$./matmul mat-A-2048.txt mat-B-2048.txt out2048.txt
```

2. Please implement the matrix multiplication in `float` and `double` separately, and compare the time consumed and the results. Give detailed analysis on the speed and accuracy.

3. You can try to improve the speed, and introduce the methods in the report.

# 报告(Report)

## 主要工作
1. 编写矩阵生成代码
2. 基础矩阵计算代码

## 矩阵加速技术解释
1. UNROLLING（展开）：加速原理，减少for循环次数，减少变量作用域上下文的切换，在一个for循环中尽可能做更多的计算，从而加速。
2. REORDERING（重排序）：在for循环中的最后一层，针对j展开，对B访问友好，从而加速。
3. TILING（分块）：将矩阵分块，使得分块出来的矩阵能够尽可能压缩进入缓存中，减少缓存丢失（miss hit）从而加速。
4. TRANSPOSE（转置）：与REORDERING类似，对矩阵B进行转置以后，使得矩阵B遍历缓存友好。
5. 组合：相关技术可以组合，从而达到更快的计算。

## 数据记录
重复三次计算平均时间

\[FLOAT-32\]

| 方法 | 计算时间(s) | 平均绝对误差 | 平均相对误差|
|    :--:      |    :--:    |   :--:    |  :--:   |
| NAVIE  | 0.0000538533 | 0.000000535852142 | 0.000000066310446 |
| UNROLLING  | 0.0000307817 | 0.000000535852142 | 0.000000066310446|
| REORDERING  | 0.0000561130 | 0.000000535852142 | 0.000000066310446 |
| TILING  | 0.0000619880 | 0.000000369028072 | 0.000000045643175 |
| TILING+REORDERING  | 0.0000576967 |0.000000535852142| 0.000000066310446 |
| TRANSPOSE  | 0.0000543233 | 0.000000535852142| 0.000000066310446 |
| FAST  | 0.0000337950 | 0.000000333766489| 0.000000041310627 |

注1:TILING BLOCK_NUM = 16

注2:FAST = UNROLLING + TILING + TRANSPOSE

\[DOUBLE-32\]

| 方法 | 计算时间(s) | 平均绝对误差 | 平均相对误差|
|    :--:      |    :--:    |   :--:    |  :--:   |
| NAVIE  | 0.0000540877 | 0.000000000000001 | 0.000000000000000 |
| UNROLLING  | 0.0000307177 | 0.000000000000001 | 0.000000000000000|
| REORDERING  | 0.0000563047 | 0.000000000000001 | 0.000000000000000 |
| TILING  | 0.0000534907 | 0.000000000000001 | 0.000000000000000 |
| TILING+REORDERING  | 0.0000676773 |0.000000000000001| 0.000000000000000 |
| TRANSPOSE  | 0.0000538997 | 0.000000000000001| 0.000000000000000 |
| FAST  | 0.0000341220 | 0.000000000000001| 0.000000000000000 |


\[FLOAT-256\]
| 方法 | 计算时间(s) | 平均绝对误差 | 平均相对误差|
|    :--:      |    :--:    |   :--:    |  :--:   |
| NAVIE  | 0.0261321523 | 0.000011174027165 | 0.000000174503035 |
| UNROLLING  | 0.0160116340 | 0.000011174027165 | 0.000000174503035|
| REORDERING  | 0.0258341453 | 0.000011174027165 | 0.000000174503035 |
| TILING  | 0.0274593603 | 0.000003151998346 | 0.000000049170175 |
| TILING+REORDERING  | 0.0291705400 |0.000011174027165| 0.000000174503035 |
| TRANSPOSE  | 0.0256771290 | 0.000011174027165| 0.000000174503035 |
| FAST  | 0.0167174870 | 0.000005711044196 | 0.000000049170175 |

\[DOUBLE-256\]
| 方法 | 计算时间(s) | 平均绝对误差 | 平均相对误差|
|    :--:      |    :--:    |   :--:    |  :--:   |
| NAVIE  | 0.0266740213 | 0.000000000000012 | 0.000000000000000 |
| UNROLLING  | 0.0157550573 | 0.000000000000012 | 0.000000000000000|
| REORDERING  | 0.0261468740 | 0.000000000000012 | 0.000000000000000 |
| TILING  | 0.0278083733 | 0.000000000000012 | 0.000000000000000 |
| TILING+REORDERING  | 0.0297294513 |0.000000000000012| 0.000000000000000 |
| TRANSPOSE  | 0.0256514923 | 0.000000000000012| 0.000000000000000 |
| FAST  | 0.0168237517 | 0.000000000000022 | 0.000000000000000 |

\[FLOAT-2048\]
| 方法 | 计算时间(s) | 平均绝对误差 | 平均相对误差|
|    :--:      |    :--:    |   :--:    |  :--:   |
| NAVIE  | 30.9472888047 | 0.000245336208613 | 0.000000479020207 |
| UNROLLING  | 16.9666659027 | 0.000245336208613 | 0.000000479020207|
| REORDERING  | 13.1194869823 | 0.000245336208613 | 0.000000479020207 |
| TILING  | 15.6396100787 | 0.000061912053941 | 0.000000120874362 |
| TILING+REORDERING  | 15.6410132370 |0.000245336208613| 0.000000479020207 |
| TRANSPOSE  | 13.0514231693 | 0.000245336208613| 0.000000479020207 |
| FAST  | 8.9737694300 | 0.000061912053941 | 0.000000120874362 |

\[DOUBLE-2048\]
| 方法 | 计算时间(s) | 平均绝对误差 | 平均相对误差|
|    :--:      |    :--:    |   :--:    |  :--:   |
| NAVIE  | 42.2117781427 | 0.000000000000096 | 0.000000000000000 |
| UNROLLING  | 20.2448693153 | 0.000000000000096 | 0.000000000000000|
| REORDERING  | 13.3012738217 | 0.000000000000096 | 0.000000000000000 |
| TILING  | 15.7617465540 | 0.000000000000470 | 0.000000000000001 |
| TILING+REORDERING  | 15.8311538160 |0.000000000000096| 0.000000000000000 |
| TRANSPOSE  | 13.1103264130 | 0.000000000000096| 0.000000000000000 |
| FAST  | 8.8838038053 | 0.000000000000470 | 0.000000000000001 |

-O3 优化选项后的数据记录：
\[FLOAT-2048\]
| 方法 | 计算时间(s) | 平均绝对误差 | 平均相对误差|
|    :--:      |    :--:    |   :--:    |  :--:   |
| NAVIE  | 17.0291805630 | 0.000245336208613 | 0.000000479020207 |
| UNROLLING  | 4.2908044870 | 0.000245336208613 | 0.000000479020207|
| REORDERING  | 0.5468391623 | 0.000245336208613 | 0.000000479020207 |
| TILING  | 2.7034212057 | 0.000061912053941 | 0.000000120874362 |
| TILING+REORDERING  | 2.0010980813 |0.000245336208613| 0.000000479020207 |
| TRANSPOSE  | 2.9900254377 | 0.000245336208613| 0.000000479020207 |
| FAST  | 1.3818553060 | 0.000061912053941 | 0.000000120874362 |

\[DOUBLE-2048\]
| 方法 | 计算时间(s) | 平均绝对误差 | 平均相对误差|
|    :--:      |    :--:    |   :--:    |  :--:   |
| NAVIE  | 37.4487016083 | 0.000000000000096 | 0.000000000000000 |
| UNROLLING  | 9.9040307053 | 0.000000000000096 | 0.000000000000000|
| REORDERING  | 1.7830143467 | 0.000000000000096 | 0.000000000000000 |
| TILING  |2.9478821663 | 0.000000000000470 | 0.000000000000001 |
| TILING+REORDERING  | 2.1031881910 |0.000000000000096| 0.000000000000000 |
| TRANSPOSE  | 3.5995754867 | 0.000000000000096| 0.000000000000000 |
| FAST  | 1.3806353360 | 0.000000000000470 | 0.000000000000001 |