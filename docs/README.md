# 并行计算导论

## 前言

&emsp;&emsp;该学习笔记主要是个人的学习笔记和理解，将其整理并分享出来与大家一同思考。在当前的大数据，大模型的背景下，重新思考高效计算个人认为仍然是值得做的一件事。

&emsp;&emsp;由于个人的水平主要是熟悉简单的计算机常识，所以相关内容应该对于大部分有计算机基础的同学应该不会有太大的难度。主要的参考资料引如附、

&emsp;&emsp;所以，该课程主要是讲解并行计算相关的内容，主要包括：

- 并行计算的基本原理
- 矩阵计算
- 多线程
- 单指令多数据处理
- CUDA编程

&emsp;&emsp;最后，希望该内容能够对并行计算做一个基础的介绍，并且针对相关的概念有对应的代码能够运行，体会其中的性能优化。

## 1 为什么需要并行计算？

&emsp;&emsp;随着当前大模型的发展，大模型虽然展示出其强大的性能，比如大语言模型，能够使用人类的语言完成相关的任务；大视觉模型，能够根据指令生成至少一眼不会有太大问题的图像、视频。但，随之能够感受到的问题是，硬件的存储能力，计算性能的“匮乏”，或者更具体来说，主要是存储能力的匮乏。

&emsp;&emsp;一个13B的大模型，在int8下需要13G的内存存储：
$$
13\text{B}*8\text{betys} = 13\text{GB}
$$

&emsp;&emsp;与此同时，虽然看似人类世界的计算能力按照18个月翻一番（摩尔定律），但单核性能早已经饱和，如下图所示：

![处理器性能](./pic/处理器提升性能表.jpg ':size=460x345')

&emsp;&emsp;可以看到，虽然晶体管一直在增加，但是单核处理器性能，功耗已经在2005年停滞增长。同时，在最近也没有新的工艺，比如量子计算机等从底层物理重新构建的计算机设备。

&emsp;&emsp;所以，如果将所有的任务都交由单核处理器来执行，在实际的体会上，2005年与2024年的计算性能差别应该是不大的。那么，如何还能够将计算任务加快？至少，人类还能够想到的一个技术是，利用多个处理器共同处理一个事情。

&emsp;&emsp;这样的想法也是非常地自然，正如在学校里，很多老师都喜欢安排“小组作业”一般，一个任务能够有多个人来做，可能会做得更好和更快；在企业中，一个任务可以交给一个团队做，而这个团队里有许多人，通过拆解这个任务，从而快速执行该任务。与之相呼应的，当前的CPU等计算设备，也开始考虑多核心，多线程的方式来提升计算性能。。

&emsp;&emsp;所以这就要求在求解相关的计算的时候，能够使用多核性能，将能够增加任务的处理速度。

## 2 高效计算的考虑

&emsp;&emsp;其实我们大可不必为了把设备性能榨干而去使用，而是从现实生活中来思考，当我们做一个事情的时候，如果这个事情能够在同一时刻有多个任务执行，比起每一个任务按序列来做，能够在单位时间内做更多的事情，从而更快的解决掉这个问题。

&emsp;&emsp;就好像小学课本中的《烧水问题》，小明需要给阿姨烧水，切茶，尽可能早点给阿姨端上来一样。

![烧水问题](./pic/烧水问题.jpg ':size=460x345')

&emsp;&emsp;至少，小明还是一个善良且智商正常的小朋友，他很自然也会想到，如果同一个时间能够有多个任务同时一起执行，那么最后完成的时间肯定要少于每一个任务都按顺序执行。

![任务清单](./pic/烧水问题_任务清单.png ':size=460x345')

&emsp;&emsp;相信大家在看完需要做的任务的清单以后，凭借着自己多年的生活经验，是很容易想到一个合理的执行策略。

&emsp;&emsp;实际上我们仔细想一下，这个问题并没有上述的任务清单那么的直接，因为上述清单有一个最不可思议的点是，每一个任务的时间都是“固定的”，这一点看似很简单，但实际上也正如各位在日常生活体验的那样，“你永远不知道意外和明天哪一个先到来”。


## 3 后续内容的简单安排




# 参考资料

- [parallel-computing-tutorial](https://github.com/mit-han-lab/parallel-computing-tutorial)
- 《GPU编程与优化——大众高性能计算》——2016.方民权 张卫民



